---
name: Data Models & Schemas - Define mock data structures
status: backlog
created: 2025-09-21T20:37:02Z
github: https://github.com/pupiltree/centuryproptax/issues/33
depends_on: ["31"]
parallel: false
conflicts_with: []
---

# Task: Data Models & Schemas - Define mock data structures

## Description

Define comprehensive data models and schemas that accurately mirror government property tax API response formats. These models will ensure seamless integration with existing application code while providing the structure for realistic mock data generation and consistent API responses.

## Acceptance Criteria

- [ ] Pydantic models matching government API response schemas
- [ ] Property record data structures with all required fields
- [ ] Tax calculation models with formulas and exemptions
- [ ] Payment history and transaction data models
- [ ] Tax notification and alert schemas
- [ ] Validation rules and field constraints
- [ ] Integration with existing data models
- [ ] Comprehensive model documentation and examples

## Technical Details

### Core Data Models:

**Property Record Schema** (`models/property_record.py`)
```python
class PropertyRecord(BaseModel):
    property_id: str
    account_number: str
    address: PropertyAddress
    owner_information: OwnerInfo
    assessment_details: AssessmentInfo
    legal_description: str
    property_type: PropertyType
    last_updated: datetime
```

**Tax Calculation Schema** (`models/tax_calculation.py`)
```python
class TaxCalculation(BaseModel):
    property_id: str
    tax_year: int
    assessed_value: Decimal
    taxable_value: Decimal
    exemptions: List[TaxExemption]
    tax_rates: TaxRateStructure
    calculated_taxes: TaxBreakdown
    payment_schedule: PaymentSchedule
```

**Payment History Schema** (`models/payment_history.py`)
```python
class PaymentHistory(BaseModel):
    property_id: str
    transactions: List[PaymentTransaction]
    current_balance: Decimal
    payment_status: PaymentStatus
    due_dates: List[DueDate]
    penalty_information: PenaltyInfo
```

**Tax Notification Schema** (`models/tax_notification.py`)
```python
class TaxNotification(BaseModel):
    notification_id: str
    property_id: str
    notification_type: NotificationType
    issue_date: datetime
    due_date: datetime
    amount_due: Decimal
    message_content: str
    status: NotificationStatus
```

### Supporting Models:

**Address and Location**
- `PropertyAddress`: Complete address with geocoding data
- `GeographicInfo`: County, district, and jurisdiction information
- `LegalDescription`: Lot, block, subdivision details

**Financial Structures**
- `TaxExemption`: Homestead, disability, veteran exemptions
- `TaxRateStructure`: School, county, city, special district rates
- `TaxBreakdown`: Detailed calculation by taxing entity
- `PaymentTransaction`: Individual payment records with methods

**Assessment Information**
- `AssessmentInfo`: Market value, assessed value, improvement details
- `PropertyCharacteristics`: Square footage, lot size, building details
- `AssessmentHistory`: Historical value changes and appeals

### Schema Validation:

**Field Constraints**
- Proper data types for all financial fields (Decimal for currency)
- Date validation and formatting consistency
- String length limits and format validation
- Enum values for categorical fields

**Business Logic Validation**
- Tax calculation formula validation
- Payment date and due date logic
- Assessment value relationship validation
- Exemption eligibility and application rules

**Response Format Consistency**
- Standardized error response schemas
- Consistent pagination and metadata structures
- Uniform timestamp and ID formatting
- API versioning support in schemas

## Implementation Steps

1. **Core Model Definition**
   - Create base property record model with all required fields
   - Define tax calculation models with proper financial types
   - Implement payment and transaction history structures

2. **Supporting Model Implementation**
   - Create address and geographic information models
   - Define exemption and tax rate structures
   - Implement notification and alert schemas

3. **Validation and Constraints**
   - Add field validation rules and constraints
   - Implement business logic validation
   - Create enum types for categorical data

4. **Integration with API Endpoints**
   - Update mock API endpoints to use new models
   - Ensure response format consistency
   - Test model serialization and validation

5. **Documentation and Examples**
   - Generate comprehensive model documentation
   - Create example responses for each model type
   - Document validation rules and constraints

## Dependencies

**Prerequisites:**
- Mock API infrastructure (Task 31) for endpoint integration
- Understanding of government API response formats
- Existing Pydantic model patterns in the codebase

**Integration Points:**
- Mock API endpoints for response model usage
- Environment configuration for model validation settings
- Existing database models for consistency

**Downstream Tasks:**
- Data generation service requires these models for realistic data creation
- API integration testing depends on consistent model structure

## Effort Estimate

**Total Time:** 8-10 hours

**Breakdown:**
- Core model definition and implementation: 3-4 hours
- Supporting models and validation rules: 2-3 hours
- Integration with API endpoints: 2-3 hours
- Documentation and testing: 1-2 hours

**Critical Path:** This task builds on mock API infrastructure and enables realistic data generation.

## Success Criteria

**Quality Gates:**
- All models validate correctly with proper field constraints
- Response format matches government API expectations exactly
- Integration with mock API endpoints works seamlessly
- Model documentation is comprehensive and accurate

**Deliverables:**
- Complete set of Pydantic models for all property tax data
- Validation rules and business logic constraints
- Integration with mock API endpoint responses
- Comprehensive model documentation with examples
- Unit tests for all model validation logic

**Validation:**
- All models serialize/deserialize correctly
- Field validation catches invalid data appropriately
- Business logic validation enforces proper relationships
- API responses use models consistently
- Documentation includes realistic example data

## Technical Considerations

### Data Accuracy Requirements:
- Financial calculations must use Decimal type for precision
- Date handling must account for Texas tax calendar specifics
- Address formatting must match Texas addressing standards
- Legal descriptions must follow Texas real estate conventions

### Performance Optimization:
- Model validation should be efficient for high-frequency API calls
- Serialization performance optimized for large property datasets
- Memory usage considerations for bulk data operations

### Extensibility:
- Models designed to accommodate future government API changes
- Versioning strategy for backward compatibility
- Plugin architecture for additional property tax jurisdictions
