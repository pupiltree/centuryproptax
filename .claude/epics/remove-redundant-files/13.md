---
name: Voice Services Complete Removal
status: completed
created: 2025-09-19T12:15:02Z
updated: 2025-09-19T13:49:59Z
github: https://github.com/pupiltree/centuryproptax/issues/13
depends_on: [001]
parallel: true
conflicts_with: [003, 004]
---

# Task: Voice Services Complete Removal

## Description

Delete the entire `/services/voice/` directory and all related voice processing dependencies, configurations, and imports. This removal targets the largest unused component in the codebase, providing significant repository size reduction while maintaining zero impact on property tax chatbot functionality.

## Acceptance Criteria

- [ ] Complete removal of `/services/voice/` directory and all contents
- [ ] All voice-related imports removed from other modules
- [ ] Voice-specific packages removed from requirements.txt
- [ ] Voice service configurations removed from environment files
- [ ] Docker configurations updated to remove voice service containers
- [ ] Voice-related test files and fixtures removed
- [ ] Zero broken imports or references to voice services after removal
- [ ] Property tax chatbot functionality remains fully operational

## Technical Details

### Primary Removal Targets:
- **Service Directory**: `/services/voice/` - complete directory removal
- **Voice Agent**: `property_tax_voice_agent.py` and related voice processing modules
- **Voice Dependencies**: Speech recognition, TTS, and audio processing packages
- **Voice Configurations**: Environment variables for voice service settings
- **Voice Tests**: Test suites specific to voice processing functionality

### Import Cleanup Scope:
- Remove voice service imports from main application modules
- Clean voice-related imports from messaging handlers
- Remove voice processing utilities from shared service modules
- Update service initialization to exclude voice components

### Package Dependencies to Remove:
- Speech recognition libraries (SpeechRecognition, pyaudio, etc.)
- Text-to-speech packages (gTTS, pyttsx3, etc.)
- Audio processing libraries specific to voice handling
- Voice API client libraries (if not used elsewhere)

### Configuration Cleanup:
- Remove voice service environment variables
- Clean voice-related settings from configuration files
- Remove voice service endpoints from API routing
- Update Docker compose to exclude voice containers

### Safety Preservations:
- Maintain WhatsApp message processing (text-based only)
- Preserve LangGraph workflow (Assistant → Tools remains unchanged)
- Keep property tax tools and calculations intact
- Maintain database and Redis persistence layers

## Implementation Steps

1. **Pre-Removal Validation**
   - Verify dependency analysis confirms zero voice service usage
   - Create git branch for voice removal operations
   - Run full test suite to establish baseline functionality

2. **Directory Removal**
   - Delete entire `/services/voice/` directory
   - Remove voice-related utility modules
   - Delete voice-specific test files and fixtures

3. **Import Cleanup**
   - Search and remove all imports referencing voice services
   - Update service initialization to exclude voice components
   - Clean voice-related imports from shared modules

4. **Dependency Cleanup**
   - Remove voice-specific packages from requirements.txt
   - Update Docker configurations to exclude voice services
   - Clean voice service environment variables

5. **Validation and Testing**
   - Run import validation to ensure no broken references
   - Execute property tax chatbot test suite
   - Verify WhatsApp message processing functionality
   - Test LangGraph workflow operations

## Dependencies

**Prerequisites:**
- Task 001 (Dependency Analysis) must complete successfully
- Confirmation that voice services have zero usage in property tax workflows
- Git branch created for safe removal operations

**Parallel Execution:**
- Can run in parallel with tasks 003 (Image Analysis Removal) and 004 (Instagram Cleanup)
- May conflict with tasks 003-004 if they modify shared configuration files

**Downstream Impact:**
- Enables final configuration cleanup tasks
- Contributes to overall repository size reduction metrics

## Effort Estimate

**Total Time:** 4-6 hours (Day 2 morning)

**Breakdown:**
- Pre-removal validation and branch setup: 1 hour
- Directory and file removal operations: 1-2 hours
- Import cleanup and dependency removal: 2 hours
- Validation testing and functionality verification: 1-2 hours

**Risk Level:** Low - Voice services confirmed as unused in property tax domain

## Success Criteria

**Functional Validation:**
- Property tax chatbot processes WhatsApp messages correctly
- All 6 property tax tools function without voice dependencies
- LangGraph workflow executes Assistant → Tools transitions
- Database and Redis operations continue normally

**Technical Validation:**
- Zero Python import errors after voice service removal
- No references to voice modules in remaining codebase
- Package dependency resolution successful without voice packages
- Docker build and deployment successful without voice containers

**Quality Gates:**
- Complete test suite passes (excluding removed voice tests)
- No broken imports or circular dependency errors
- Configuration files valid without voice service settings
- Application startup successful without voice service initialization

## Rollback Procedures

**Git-Based Rollback:**
- Full directory restoration from git commit before removal
- Package dependency restoration via requirements.txt reset
- Configuration file restoration from previous commit

**Validation Steps:**
- Verify restored voice services initialize correctly
- Confirm voice dependencies install without conflicts
- Test voice functionality restoration (if needed for validation)

**Emergency Procedures:**
- Immediate rollback if property tax functionality breaks
- Staged rollback of configuration vs. code changes
- Preservation of non-voice changes made during parallel tasks