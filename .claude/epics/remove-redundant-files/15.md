---
name: Instagram Integration Cleanup
status: completed
created: 2025-09-19T12:15:02Z
updated: 2025-09-19T13:50:05Z
github: https://github.com/pupiltree/centuryproptax/issues/15
depends_on: [001]
parallel: true
conflicts_with: [002, 003]
---

# Task: Instagram Integration Cleanup

## Description

Remove Instagram API handlers, webhook processors, and Instagram-specific message formatting code while preserving WhatsApp Business API integration. This cleanup eliminates unused social media integration inherited from Krishna Diagnostics multi-platform approach, focusing the codebase on WhatsApp-only property tax chatbot functionality.

## Acceptance Criteria

- [ ] All Instagram API handlers and webhook processors removed
- [ ] Instagram-specific message formatting code eliminated
- [ ] Instagram authentication and configuration removed from environment files
- [ ] Instagram-related imports cleaned from messaging services
- [ ] Instagram webhook endpoints removed from API routing
- [ ] Instagram test files and mock data removed
- [ ] WhatsApp Business API integration remains fully functional
- [ ] Property tax chatbot messaging continues without Instagram dependencies

## Technical Details

### Primary Removal Targets:
- **Instagram API Handlers**: Instagram Graph API client code and webhook processors
- **Instagram Message Formatting**: Instagram-specific message templates and formatting
- **Instagram Authentication**: Instagram app credentials and OAuth handling
- **Instagram Webhooks**: Instagram webhook endpoints and event processing
- **Instagram Configurations**: Instagram-specific environment variables and settings

### Search Patterns for Removal:
- Files and functions containing "instagram" or "Instagram" keywords
- Instagram API endpoints and webhook handlers
- Instagram-specific message formatting and template code
- Instagram authentication and credential management
- Instagram webhook processing and event handling

### Import Cleanup Scope:
- Remove Instagram API client imports from messaging services
- Clean Instagram-specific imports from webhook handlers
- Remove Instagram authentication imports from communication modules
- Update service initialization to exclude Instagram components

### Configuration Cleanup:
- Remove Instagram app credentials from environment files
- Clean Instagram webhook URLs and verification tokens
- Remove Instagram API rate limiting and quota configurations
- Update API routing to exclude Instagram endpoints

### Safety Preservations:
- Maintain WhatsApp Business API integration completely intact
- Preserve shared messaging infrastructure used by WhatsApp
- Keep common webhook processing patterns (non-Instagram specific)
- Maintain message formatting utilities used for WhatsApp

## Implementation Steps

1. **Instagram Component Identification**
   - Use dependency analysis results to identify Instagram-specific code
   - Search codebase for Instagram-related patterns and keywords
   - Map Instagram integrations vs shared messaging infrastructure

2. **Instagram API Removal**
   - Remove Instagram API client initialization and configuration
   - Delete Instagram webhook endpoints and event processors
   - Clean Instagram authentication and credential handling

3. **Message Processing Cleanup**
   - Remove Instagram-specific message formatting code
   - Clean Instagram template handling from shared messaging services
   - Preserve WhatsApp message processing patterns

4. **Configuration and Environment Cleanup**
   - Remove Instagram environment variables and credentials
   - Clean Instagram API configurations from settings files
   - Update Docker configurations to exclude Instagram services

5. **Validation and Testing**
   - Verify WhatsApp message processing continues normally
   - Test property tax chatbot functionality via WhatsApp
   - Ensure no broken imports or references to Instagram services

## Dependencies

**Prerequisites:**
- Task 001 (Dependency Analysis) must identify Instagram usage patterns
- Clear separation of Instagram vs WhatsApp messaging infrastructure
- Understanding of shared vs platform-specific message handling

**Parallel Execution:**
- Can run in parallel with tasks 002 (Voice Services) and 003 (Image Analysis)
- May conflict with tasks 002-003 if they modify shared messaging configurations

**Critical Considerations:**
- Must preserve WhatsApp Business API integration completely
- Avoid disruption to shared messaging infrastructure
- Maintain common webhook processing patterns used by WhatsApp

## Effort Estimate

**Total Time:** 3-5 hours (Day 2 afternoon)

**Breakdown:**
- Instagram component identification and mapping: 1-2 hours
- Instagram API and webhook removal: 1-2 hours
- Message processing cleanup and validation: 1 hour
- Configuration cleanup and testing: 1 hour

**Risk Level:** Medium - Requires careful separation of Instagram vs WhatsApp messaging

## Success Criteria

**Functional Validation:**
- WhatsApp Business API integration functions correctly
- Property tax chatbot processes WhatsApp messages without issues
- WhatsApp webhook processing continues normally
- All 6 property tax tools accessible via WhatsApp interface

**Technical Validation:**
- Zero Python import errors after Instagram removal
- No references to Instagram API or services in remaining codebase
- WhatsApp message formatting and processing preserved
- API routing excludes Instagram endpoints but preserves WhatsApp endpoints

**Quality Gates:**
- WhatsApp integration test suite passes completely
- Property tax conversation flow works end-to-end via WhatsApp
- No broken imports or circular dependency errors
- Application startup successful without Instagram service initialization

## Rollback Procedures

**Git-Based Rollback:**
- Restore Instagram components from git commit before removal
- Revert configuration changes specific to Instagram integration
- Restore Instagram API dependencies if needed

**Validation Steps:**
- Verify restored Instagram services initialize correctly (if restoration needed)
- Confirm Instagram API credentials and webhooks functional (if applicable)
- Test Instagram message processing restoration (for validation only)

**Emergency Procedures:**
- Immediate rollback if WhatsApp functionality breaks
- Staged rollback to isolate Instagram vs WhatsApp messaging issues
- Preservation of voice and image analysis removals made during parallel tasks

## Special Considerations

**Shared Infrastructure Preservation:**
- Identify and preserve messaging utilities shared between Instagram and WhatsApp
- Maintain webhook processing patterns common to both platforms
- Keep message validation and formatting utilities used by WhatsApp

**Configuration File Conflicts:**
- Coordinate with tasks 002-003 when modifying shared configuration files
- Preserve WhatsApp-specific environment variables during Instagram cleanup
- Maintain database schema used by WhatsApp integration

**Testing Strategy:**
- Focus testing on WhatsApp functionality preservation
- Validate property tax conversation flow via WhatsApp after cleanup
- Ensure Instagram removal doesn't impact WhatsApp message delivery or processing